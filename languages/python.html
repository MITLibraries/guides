
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Python Guidelines &#8212; Guides  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Rails at MIT Libraries" href="rails.html" />
    <link rel="prev" title="Pair programming" href="../collaboration/pairing.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="python-guidelines">
<h1>Python Guidelines<a class="headerlink" href="#python-guidelines" title="Permalink to this headline">¶</a></h1>
<section id="python-versions">
<h2>Python versions<a class="headerlink" href="#python-versions" title="Permalink to this headline">¶</a></h2>
<p>You should be using the most recent stable version. Don’t use Python 2. If creating AWS lambda functions, refer to <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html">their docs</a> for information on the latest supported Python version (seems to lag behind the official Python releases).</p>
</section>
<section id="creating-a-project-from-templates">
<h2>Creating a project from templates<a class="headerlink" href="#creating-a-project-from-templates" title="Permalink to this headline">¶</a></h2>
<p>We have Github template repositories for two types of Python projects:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/MITLibraries/python-cli-template">CLI applications</a>, generally created with <a class="reference external" href="https://click.palletsprojects.com/">Click</a> and run as containers in Fargate.</p></li>
<li><p><a class="reference external" href="https://github.com/MITLibraries/python-lambda-template">AWS lambda functions</a>, published and run as containerized functions.</p></li>
</ul>
<p>If you are creating either of those types of applications, please start from a template. See <a class="reference external" href="https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template">Github guidelines for creating a repository from a template</a>.</p>
<p>Note: it’s important that you follow all of the setup instructions in the template’s README, particulary those regarding Github settings for the repository.</p>
<p>If you notice anything that needs to be updated in either of the templates, please submit a PR!</p>
</section>
<section id="style-and-coding-conventions">
<h2>Style and coding Conventions<a class="headerlink" href="#style-and-coding-conventions" title="Permalink to this headline">¶</a></h2>
<p>In general, you should follow <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a> and <a class="reference external" href="https://www.python.org/dev/peps/pep-0257/">PEP 257</a>. Unless otherwise stated here, assume those two guidelines are in effect.</p>
<p>If you are providing function docstrings, use <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reST</a>. In addition to a description of what a function does, you should document the parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">widgetize</span><span class="p">(</span><span class="n">widget</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Properly widgetize the widget.</span>

<span class="sd">  This ensures that the widget conforms to the strict standards</span>
<span class="sd">  governing conformant widgets.</span>

<span class="sd">  :param widget: a widget what needs widgetizing</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="n">standardize</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>
</pre></div>
</div>
<section id="linting-code-quality-and-code-safety">
<h3>Linting, code quality, and code safety<a class="headerlink" href="#linting-code-quality-and-code-safety" title="Permalink to this headline">¶</a></h3>
<p>Our standard Python code checkers in all repositories include:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://bandit.readthedocs.io/en/latest/">bandit</a> - security</p></li>
<li><p><a class="reference external" href="https://black.readthedocs.io/en/stable/">black</a> - formatting</p></li>
<li><p><a class="reference external" href="https://pycqa.github.io/isort/">isort</a> - import order</p></li>
<li><p><a class="reference external" href="https://mypy.readthedocs.io/en/stable/">mypy</a> - type hinting</p></li>
<li><p><a class="reference external" href="https://github.com/klen/pylama">pylama</a> - formatting and code quality (wrapper around several other tools)</p></li>
</ul>
<p>These tools should be used during development and are run automatically in Github Actions during CI. They are all included in the template repositories listed above, and have integrations for common code editors to allow automatic checking and reformatting during development.</p>
<p>The linters are usually run together with the <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">lint</span></code> command in a project’s Makefile. See the template repositories for examples.</p>
</section>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>Use <a class="reference external" href="https://pipenv.readthedocs.io/en/latest/">Pipenv</a> to manage dependencies for Python applications. If there’s some reason you need to support pip, then you should still manage dependencies with pipenv, but generate your <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file as needed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pipenv</span> <span class="n">requirements</span> <span class="o">&gt;</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>If you are creating a Python library, <a class="reference external" href="https://python-poetry.org/">Poetry</a> is the preferred package and distribution manager.</p>
</section>
<section id="project-documentation">
<h2>Project Documentation<a class="headerlink" href="#project-documentation" title="Permalink to this headline">¶</a></h2>
<p>Use <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a> for generating project documentation.</p>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>All Python code should be thoroughly tested for expected cases, not just best-case scenarios. We generally use <a class="reference external" href="https://docs.pytest.org">Pytest</a> as the test framework for our repos, along with <a class="reference external" href="https://coverage.readthedocs.io/">Coverage</a> for test coverage reporting. These are included in the template repository dev dependencies.</p>
<p>Other useful tools for testing in Python:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://docs.getmoto.org/en/latest/">moto</a> - for mocking AWS services in tests</p></li>
<li><p><a class="reference external" href="https://requests-mock.readthedocs.io/en/latest/">requests-mock</a> - for mocking HTTP requests</p></li>
<li><p><a class="reference external" href="https://vcrpy.readthedocs.io/en/latest/">vcrpy</a> - for automatically capturing calls to external APIs for reuse in tests</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Guides</a></h1>








<h3>Navigation</h3>
<p><span class="caption-text">Start Here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/a11y.html">Accessibility / a11y</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/github.html">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/github_desktop.html">GitHub Desktop</a></li>
</ul>
<p><span class="caption-text">How We Work Together</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../collaboration/code_review.html">Code review</a></li>
<li class="toctree-l1"><a class="reference internal" href="../collaboration/pairing.html">Pair programming</a></li>
</ul>
<p><span class="caption-text">Languages and Frameworks</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python Guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#python-versions">Python versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-project-from-templates">Creating a project from templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#style-and-coding-conventions">Style and coding Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#project-documentation">Project Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rails.html">Rails at MIT Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="vuejs.html">Vue.js at MIT Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="wordpress.html">WordPress at MIT Libraries</a></li>
</ul>
<p><span class="caption-text">Authentication</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../authentication/oauth.html">OAuth at MIT (deprecated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authentication/touchstone_saml.html">Touchstone / Shibboleth / SAML</a></li>
</ul>
<p><span class="caption-text">Deployment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploy/airflow.html">Airflow: workflow engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/aws-2.0.html">AWS Organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/cicd.html">Continuous Integration/Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/heroku.html">Heroku</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/heroku_checklist.html">Heroku Launch Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/legacy-aws.html">Legacy AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/legacy-terraform.html">Legacy Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/pantheon.html">Pantheon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/terraform-1.0.html">Terraform</a></li>
</ul>
<p><span class="caption-text">Everything else</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/adr.html">Architecture Decision Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/docker.html">Containerizing Your App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/exception_monitoring.html">Exception Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/incident_response.html">Incident Response Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/logging.html">Central Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/matomo.html">Configuring Matomo for analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/proxy_urls.html">Proxy URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/ssl.html">SSL Encryption</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../collaboration/pairing.html" title="previous chapter">Pair programming</a></li>
      <li>Next: <a href="rails.html" title="next chapter">Rails at MIT Libraries</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, MIT Libraries.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/languages/python.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>