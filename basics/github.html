
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>GitHub &#8212; Guides  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GitHub Desktop" href="github_desktop.html" />
    <link rel="prev" title="Accessibility / a11y" href="a11y.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="github">
<h1>GitHub<a class="headerlink" href="#github" title="Permalink to this headline">¶</a></h1>
<section id="repo-naming">
<h2>Repo naming<a class="headerlink" href="#repo-naming" title="Permalink to this headline">¶</a></h2>
<p>Naming is important (see <a class="reference external" href="https://www.taketheleadwomen.com/blog/theres-power-in-naming-and-power-in-knowing-your-name">There’s Power in Naming …</a>). More specific to our work, there are a few guidelines for naming new repos</p>
<ul class="simple">
<li><p>All Terraform repo names start with <strong>mitlib-tf</strong> (to emphasize that these are MIT Libraries Terraform repositories)</p></li>
<li><p>All repos that are local tweaks to generally available, pre-built Docker images should start with <strong>docker-</strong> (to indicate that this is a Docker image, not a MIT Libraries built/managed application)</p></li>
</ul>
<p>There are probably more guidelines (e.g., some repo names should be recursive acronyms), but two is a good number to begin with.</p>
</section>
<section id="recommended-repo-settings">
<h2>Recommended repo settings<a class="headerlink" href="#recommended-repo-settings" title="Permalink to this headline">¶</a></h2>
<p><strong>Note</strong>: Terraform repos should only be created via the <a class="reference external" href="https://github.com/mitlibraries/mitlib-tfc-mgmt">mitlib-tfc-mgmt</a> repository (and this will take care of all of the appropriate admin settings as well as the integration with Terraform Cloud).</p>
<p>In the admin settings for repos on GitHub, the recommended settings are:</p>
<ul class="simple">
<li><p>Default branch should be “main” (<code class="docutils literal notranslate"><span class="pre">Branches</span> <span class="pre">&gt;</span> <span class="pre">Default</span> <span class="pre">branch</span></code>)</p></li>
<li><p>Disable force push to the main branch. For everyone. Even admins. (<code class="docutils literal notranslate"><span class="pre">Branches</span> <span class="pre">&gt;</span> <span class="pre">Protected</span> <span class="pre">branches</span></code>)</p></li>
<li><p>Edit the protected branch and check these option settings:</p>
<ul>
<li><p>protect this branch</p></li>
<li><p>require pull request reviews before merging</p></li>
<li><p>require status checks to pass before merging</p></li>
<li><p>require that branches are up to date</p></li>
</ul>
</li>
<li><p>Allow merge commits (<code class="docutils literal notranslate"><span class="pre">Options</span> <span class="pre">&gt;</span> <span class="pre">Merge</span> <span class="pre">button</span></code>)</p></li>
</ul>
</section>
<section id="workflows">
<h2>Workflows<a class="headerlink" href="#workflows" title="Permalink to this headline">¶</a></h2>
<p>In most cases, <a class="reference external" href="https://guides.github.com/introduction/flow/">GitHub flow</a> will be the best choice for projects. For small teams there is usually no need for anything more complicated than this. Thoughtbot has some <a class="reference external" href="https://github.com/thoughtbot/guides/tree/main/git">additional recommendations</a> which should be followed.</p>
<p>Ideally, feature branches should encompass small, targeted changes. Keeping your work focused will mean fewer merge conflicts. When building a new code base this may not always be possible, but what you want to try and avoid are long running branches. By the time you want to merge, the distance between your feature branch and main will usually mean a lot of conflict resolution in your future.</p>
<p>There is an exception to this for Infrastructure code. For the Terraform code, InfraEng uses a Simplified Git Flow model (which could also be seen as GitHub Flow on steroids). In this case, each deployment environment (prod &amp; stage) is linked to a long-running branch in the repository. As in GitHub Flow, feature branches should encompass small, targeted changes. They are always branched from and merged to the <code class="docutils literal notranslate"><span class="pre">stage</span></code> branch. And the only merges to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch come from approved merges on the <code class="docutils literal notranslate"><span class="pre">stage</span></code> branch. More details on this model can be found at <a class="reference external" href="https://medium.com/goodtogoat/simplified-git-flow-5dc37ba76ea8">Simplified Git Flow</a> and at <a class="reference external" href="https://mitlibraries.atlassian.net/wiki/spaces/IN/pages/2920480769/Simplified+Git+Flow+For+InfraEng">Simplified Git Flow for InfraEng</a>.</p>
</section>
<section id="merging-and-rebasing">
<h2>Merging and Rebasing<a class="headerlink" href="#merging-and-rebasing" title="Permalink to this headline">¶</a></h2>
<p>The thoughtbot guide recommends pushing your feature branch to remote only when you are ready to issue a PR. This will make it easier to rebase and squash commits without making life difficult for other developers. Generally, this should be your workflow, but it’s still acceptable to rebase and squash commits on a remote branch. If no one else has based any work off your branch, this shouldn’t present any problems. If other developers have based work off your branch, you will need to coordinate any rebasing or squashing. In either case, you should clearly communicate to the team that you have done either of these actions.</p>
<p>The one important difference to note from the thoughtbot guide is in the section on merging. Merging GitHub PRs through the Web interface will always use <code class="docutils literal notranslate"><span class="pre">--no-ff</span></code>. If merging from the command line, instead of doing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git merge &lt;branch-name&gt; --ff-only
</pre></div>
</div>
<p>you should do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git merge &lt;branch-name&gt; --no-ff
</pre></div>
</div>
</section>
<section id="pull-requests">
<h2>Pull Requests<a class="headerlink" href="#pull-requests" title="Permalink to this headline">¶</a></h2>
<p>We use pull requests to merge changes to a codebase. In nearly all instances, pull requests should be reviewed by
another person before merging. Check out our <a class="reference external" href="/collaboration/code_review.html">code review guide</a> for more information
on how this works.</p>
</section>
<section id="github-and-jira">
<h2>Github and JIRA<a class="headerlink" href="#github-and-jira" title="Permalink to this headline">¶</a></h2>
<p>In general, if you are creating code on GitHub, commenting and review should happen there, with the code. If you are also using JIRA, you should add a comment with a link to the PR to the story in JIRA and move the story to the Review column to indicate that the PR is under review.</p>
<p>(If changes are not commited to GitHub - like with Wordpress configurations - the comments and review should happen in JIRA; Mention reviewers by name in a comment on the ticket, what they should be reviewing, where they can view the changes, and then move the story to the Review column.)</p>
</section>
<section id="github-and-code-climate">
<h2>GitHub and Code Climate<a class="headerlink" href="#github-and-code-climate" title="Permalink to this headline">¶</a></h2>
<p>We use <a class="reference external" href="https://codeclimate.com/">Code Climate</a>’s GitHub integration to monitor
for code smells. Code Climate is free for open source repositories.</p>
<p>To connect Code Climate to your repo:</p>
<ol class="simple">
<li><p><a class="reference external" href="https://codeclimate.com/login">Log in to Code Climate</a> with your GitHub
account</p></li>
<li><p>If it’s your first time logging in, grant Code Climate OAuth permissions as
prompted</p></li>
<li><p>Follow the prompts to add your repo:</p>
<ul class="simple">
<li><p>On the dashboard, click the ‘Open source’ link, then click ‘Add a repository’</p></li>
<li><p>Find your repo on the ensuing list, then click ‘Add repository’ <em>(note: you
may need to click the ‘Sync now’ link for all repos to appear)</em></p></li>
</ul>
</li>
<li><p>Continue to your repo dashboard in Code Climate, then click the ‘Repo settings’
tab. Click ‘GitHub’ on the menu, then install ‘Pull request status updates’ and
‘Webhook on GitHub’</p></li>
<li><p>Code Climate should now run in GitHub every time you open a PR. In your
GitHub repo, you can confirm this by going to Settings -&gt; Webhooks and make
sure the Code Climate webhook is listed <em>(note: if Code Climate is stuck pending
in your PR, it might be because you opened the PR prior to configuring Code Climate)</em></p></li>
</ol>
</section>
<section id="updating-the-default-branch-in-github">
<h2>Updating the default branch in GitHub<a class="headerlink" href="#updating-the-default-branch-in-github" title="Permalink to this headline">¶</a></h2>
<p>While all new repos will be created with <code class="docutils literal notranslate"><span class="pre">main</span></code> as the default branch, older
repos may still use <code class="docutils literal notranslate"><span class="pre">master</span></code> and should be migrated. GitHub now provides an
easy way to do this in the web UI. In the repo’s settings, you can
change the name of the default branch.</p>
<p>Once you change the branch name, you and your collaborators will need to pull
the changes to your cloned repos.</p>
<p>Additionally, you should check any automations you have configured to ensure
they are watching the new branch (e.g., CodeClimate, CI/CD).</p>
</section>
<hr class="docutils" />
<section id="github-basics">
<h2>GitHub basics<a class="headerlink" href="#github-basics" title="Permalink to this headline">¶</a></h2>
<p>This process assumes you have: a terminal program (like the OS terminal or iTerm with oh-my-zsh), an editor program (like Sublime Text or Atom), a github account and access to the MIT Libraries repos, and have already cloned the repos to your local machine. (For help with those steps, contact one of the MITLib devs.)</p>
<p><strong>Start fresh</strong>: Checkout main branch</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">main</span></code></p>
<p><strong>Get latest</strong>: Get the latest changes that have been merged</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">fetch</span>
<span class="n">git</span> <span class="n">merge</span>
</pre></div>
</div>
<p><strong>Create a branch</strong>: Create a new branch starting with main (or the branch you want to base your work on): This is the clean separate space where you will put your work.</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">[branchname]</span></code></p>
<p><strong>Do stuff</strong>: open the repo in your editor and write code or make edits that relate to the fix/feature/experiment you are working on.</p>
<p><strong>Commit your changes regularly</strong>: once you have a few changes that add up to something (eg. ‘added new js function to load rss’ or ‘added new css to support adjusted mini-cal alignment’) or if you have to stop for a bit or switch to something else, add the files you are ready to commit, then commit them to your branch and push them to github. Please use helpful commit messages! Here are some <a class="reference external" href="https://chris.beams.io/posts/git-commit/">guidelines for writing good commit messages</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="p">[</span><span class="n">filename</span><span class="p">]</span> 
<span class="n">git</span> <span class="n">add</span> <span class="p">[</span><span class="n">filename</span><span class="p">]</span> 
<span class="o">...</span>
<span class="n">git</span> <span class="n">commit</span>
<span class="p">[</span><span class="n">add</span> <span class="n">a</span> <span class="n">good</span> <span class="n">description</span> <span class="n">of</span> <span class="n">what</span><span class="s1">&#39;s in the commit]</span>
<span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
<p><strong>Do more stuff</strong>: keep working and committing (repeat steps 4 and 5) until your work for that fix/feature/experiment is as complete as you can make it.</p>
<p><strong>Make a PR</strong>: go to github and create a new PR for your branch against main/prod branch (see Pull Request Reviews above).</p>
<p><strong>Respond to PR feedback</strong>: as feedback comes in, create additional commits to address and push them up. Do NOT squash/rebase during review as that makes headaches for reviewers.</p>
<p><strong>Get thumbs</strong>: once each reviewer is done with their review and happy with the code that will be merged, they should approve the PR and give a thumbs up  :+1:</p>
<p><strong>Squash commits (optional)</strong>: before merging, squash all your work into logical commits - or one single commit - that summarizes the changes. <strong>Note</strong>: do not use GitHub’s <em>Squash and Merge</em> option to do the squashing!</p>
<p><strong>Merge the PR</strong>: merge the PR on github and delete the branch.</p>
<p><strong>Fetch latest main</strong>: Return to your terminal, checkout the main branch and fetch and merge the latest changes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">main</span>
<span class="n">git</span> <span class="n">fetch</span>
<span class="n">git</span> <span class="n">merge</span>
</pre></div>
</div>
</section>
<section id="advanced-topics">
<h2>Advanced topics<a class="headerlink" href="#advanced-topics" title="Permalink to this headline">¶</a></h2>
<p>The following topics are useful to get to know but often require someone knowledgable with git to teach or at least have nearby for questions/abort commands.</p>
<ul class="simple">
<li><p>Rebasing</p></li>
<li><p>Merge conflicts</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Guides</a></h1>








<h3>Navigation</h3>
<p><span class="caption-text">Start Here</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="a11y.html">Accessibility / a11y</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">GitHub</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#repo-naming">Repo naming</a></li>
<li class="toctree-l2"><a class="reference internal" href="#recommended-repo-settings">Recommended repo settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#workflows">Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="#merging-and-rebasing">Merging and Rebasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pull-requests">Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#github-and-jira">Github and JIRA</a></li>
<li class="toctree-l2"><a class="reference internal" href="#github-and-code-climate">GitHub and Code Climate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-the-default-branch-in-github">Updating the default branch in GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="#github-basics">GitHub basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-topics">Advanced topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="github_desktop.html">GitHub Desktop</a></li>
</ul>
<p><span class="caption-text">How We Work Together</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../collaboration/code_review.html">Code review</a></li>
<li class="toctree-l1"><a class="reference internal" href="../collaboration/pairing.html">Pair programming</a></li>
</ul>
<p><span class="caption-text">Languages and Frameworks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../languages/python.html">Python Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../languages/rails.html">Rails at MIT Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../languages/vuejs.html">Vue.js at MIT Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../languages/wordpress.html">WordPress at MIT Libraries</a></li>
</ul>
<p><span class="caption-text">Authentication</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../authentication/oauth.html">OAuth at MIT (deprecated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authentication/touchstone_saml.html">Touchstone / Shibboleth / SAML</a></li>
</ul>
<p><span class="caption-text">Deployment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploy/airflow.html">Airflow: workflow engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/aws-2.0.html">AWS Organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/cicd.html">Continuous Integration/Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/heroku.html">Heroku</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/heroku_checklist.html">Heroku Launch Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/legacy-aws.html">Legacy AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/legacy-terraform.html">Legacy Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/pantheon.html">Pantheon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/terraform-1.0.html">Terraform</a></li>
</ul>
<p><span class="caption-text">Everything else</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/adr.html">Architecture Decision Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/docker.html">Containerizing Your App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/exception_monitoring.html">Exception Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/incident_response.html">Incident Response Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/logging.html">Central Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/matomo.html">Configuring Matomo for analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/proxy_urls.html">Proxy URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/ssl.html">SSL Encryption</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="a11y.html" title="previous chapter">Accessibility / a11y</a></li>
      <li>Next: <a href="github_desktop.html" title="next chapter">GitHub Desktop</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, MIT Libraries.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/basics/github.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>